<html>
<head>

  <title>glTactics</title>

  <style>
  canvas { width: 100%; height: 100% }
  body, html {
    border: 0;
    padding: 0;
    margin: 0;
  }
  </style>

</head>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
<script type="text/javascript" src="https://rawgithub.com/mrdoob/three.js/master/build/three.js"></script>
<script type="text/javascript" src="https://rawgithub.com/mrdoob/three.js/master/examples/js/controls/FlyControls.js"></script>
<script type="text/javascript" src="http://threejs.org/examples/js/postprocessing/EffectComposer.js"></script>
<script type="text/javascript" src="http://threejs.org/examples/js/shaders/FilmShader.js"></script>
<script type="text/javascript" src="http://threejs.org/examples/js/shaders/CopyShader.js"></script>
<script type="text/javascript" src="http://threejs.org/examples/js/postprocessing/ShaderPass.js"></script>
<script type="text/javascript" src="http://threejs.org/examples/js/postprocessing/RenderPass.js"></script>
<script type="text/javascript" src="http://threejs.org/examples/js/postprocessing/FilmPass.js"></script>
<script type="text/javascript" src="http://threejs.org/examples/js/postprocessing/MaskPass.js"></script>

<script>
$(document).ready(function(){
  var scene = new THREE.Scene();
  var camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
  var renderer = new THREE.WebGLRenderer();

  renderer.setSize(window.innerWidth, window.innerHeight);
  renderer.sortObjects = false;
  renderer.autoClear = false;

  var clock = new THREE.Clock();

  var container = document.createElement( 'div' );
  container.appendChild( renderer.domElement );
  document.body.appendChild( container );

  var controls = new THREE.FlyControls( camera );

  controls.movementSpeed = 1000;
  controls.domElement = container;
  controls.rollSpeed = Math.PI / 12;
  controls.autoForward = false;
  controls.dragToLook = false;

  var composer = new THREE.EffectComposer( renderer );

  var renderModel = new THREE.RenderPass( scene, camera );
  var effectFilm = new THREE.FilmPass( 0.35, 0.75, 2048, false );

  effectFilm.renderToScreen = true;

  composer.addPass( renderModel );
  composer.addPass( effectFilm );

  // yellow squad
  var dir = new THREE.Vector3( -1, 0, 0 );
  var origin = new THREE.Vector3( 190, 0, 150 );
  var length = 10;
  var hex = 0xffff00;

  for (var i = 0; i <= 16; i++) {
    var arrowHelper = new THREE.ArrowHelper( dir, origin, length, hex, 10, 5 );
    scene.add( arrowHelper );
    origin = new THREE.Vector3( 190, 0, 150 - (i * 20) );
  }

  // green squad
  var dir = new THREE.Vector3( 1, 0, 0 );
  var origin = new THREE.Vector3( -190, 0, 150 );
  var hex = 0x00ff00;

  for (var i = 0; i <= 16; i++) {
    var arrowHelper = new THREE.ArrowHelper( dir, origin, length, hex, 10, 5 );
    scene.add( arrowHelper );
    origin = new THREE.Vector3( -190, 0, 150 - (i * 20) );
  }

  camera.position.y = 300;
  camera.lookAt(new THREE.Vector3( 0, -90, 0 ))

  var helper = new THREE.GridHelper( 200, 10 );
  helper.setColors( 0x0000ff, 0x808080 );
  scene.add( helper );

  var render = function () {
    var delta = clock.getDelta();

    var d = 100;
    controls.movementSpeed = 0.33 * d;
    controls.update( delta );

    renderer.clear();
    composer.render( delta );
  };

  var animate = function () {
    requestAnimationFrame( animate );

    render();
  }

  animate();
});
</script>

<body>

  <div id="info"><b>WASD</b> move, <b>R|F</b> up | down, <b>Q|E</b> roll, <b>up|down</b> pitch, <b>left|right</b> yaw<br/></div>

</body>
</html>
